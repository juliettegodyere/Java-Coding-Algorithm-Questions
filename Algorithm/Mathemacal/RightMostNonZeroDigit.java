package Algorithm.Mathemacal;

//Question https://practice.geeksforgeeks.org/problems/right-most-non-zero-digit1834/1#
public class RightMostNonZeroDigit {
    //My solution. Didn't work for all cases
    static int rightmostNonZeroDigit(int N, int[] A) {
        // code here
        int mul = 1;
        int rm = -1;
        for (int i = 0; i < N; i++) {
            System.out.println(mul);
            mul = mul * A[i];
        }
        System.out.println(mul);
        String s = String.valueOf(mul);
        int x = s.length();
        for (int i = x - 1; i >= 0; i--) {
            if (s.charAt(i) != '0') {
                String t = "" + s.charAt(i);
                rm = Integer.parseInt(t);
                return rm;
            }
        }
        return rm;
    }
    //Solution: https://www.geeksforgeeks.org/right-most-non-zero-digit-in-multiplication-of-array-elements/
    static int rightmostNonZero(int n, int a[]) {
        int c5 = 0;

        for (int i = 0; i < n; i++) {
            while (a[i] > 0 && a[i] % 5 == 0) {
                a[i] /= 5;
                c5++;
            }
        }

        for (int i = 0; i < n; i++) {
            while (c5 != 0 && a[i] > 0 && (a[i] & 1) == 0) {
                a[i] >>= 1;
                c5--;
            }
        }

        int ans = 1;
        for (int i = 0; i < n; i++) {
            ans = (ans * a[i] % 10) % 10;
        }
        if (c5 != 0)
            ans = (ans * 5) % 10;

        if (ans != 0)
            return ans;

        return -1;
    }

    public static void main(String args[]) {
        int N = 509;
        int[] A = { 901, 314, 128, 940, 112, 356, 172, 594, 499, 35, 72, 798, 697, 981, 29, 445, 53, 73, 675, 577, 647,
                102, 658, 971, 238, 712, 635, 938, 250, 330, 485, 895, 217, 317, 724, 413, 43, 463, 211, 128, 582, 609,
                250, 276, 662, 155, 100, 743, 574, 515, 153, 801, 981, 842, 866, 795, 328, 223, 384, 670, 945, 850, 879,
                481, 161, 95, 971, 803, 947, 565, 240, 411, 790, 958, 120, 676, 786, 672, 170, 890, 68, 740, 882, 548,
                759, 30, 530, 427, 661, 146, 480, 756, 328, 366, 394, 7, 692, 274, 435, 326, 552, 537, 229, 924, 72,
                680, 550, 47, 572, 994, 235, 81, 662, 494, 741, 676, 914, 641, 857, 701, 250, 359, 741, 250, 155, 546,
                632, 330, 366, 518, 257, 215, 670, 981, 885, 317, 773, 461, 982, 188, 19, 781, 234, 363, 136, 618, 926,
                526, 608, 372, 258, 766, 765, 565, 765, 958, 933, 43, 661, 949, 454, 578, 949, 186, 609, 161, 855, 37,
                622, 231, 491, 171, 414, 626, 369, 897, 929, 251, 731, 923, 761, 57, 884, 684, 1000, 505, 781, 428, 725,
                387, 761, 950, 559, 715, 327, 170, 696, 749, 995, 438, 273, 275, 935, 290, 328, 786, 523, 487, 865, 831,
                500, 433, 375, 465, 824, 837, 200, 953, 596, 695, 350, 563, 414, 799, 467, 809, 316, 375, 283, 871, 631,
                252, 504, 178, 537, 52, 565, 714, 517, 525, 693, 92, 471, 643, 416, 86, 377, 779, 473, 36, 588, 803,
                122, 227, 844, 341, 622, 717, 414, 228, 745, 587, 298, 62, 13, 557, 362, 510, 743, 796, 177, 516, 285,
                337, 666, 86, 668, 284, 311, 388, 313, 129, 978, 13, 438, 495, 946, 537, 857, 651, 956, 168, 743, 624,
                1000, 304, 360, 331, 784, 932, 240, 81, 3, 875, 907, 427, 472, 575, 407, 412, 338, 183, 138, 489, 557,
                604, 922, 881, 91, 931, 129, 125, 853, 852, 435, 905, 684, 318, 819, 508, 280, 333, 457, 818, 500, 335,
                4, 259, 852, 139, 197, 431, 171, 271, 755, 81, 753, 329, 749, 569, 857, 242, 320, 952, 120, 210, 56,
                487, 768, 504, 730, 133, 166, 212, 818, 389, 581, 13, 890, 295, 874, 86, 891, 293, 934, 667, 626, 499,
                507, 430, 326, 202, 553, 512, 227, 974, 614, 132, 547, 420, 879, 698, 147, 284, 334, 551, 504, 433, 162,
                669, 792, 558, 649, 411, 569, 615, 753, 971, 339, 630, 659, 157, 140, 91, 437, 895, 983, 129, 495, 514,
                924, 891, 376, 59, 989, 867, 515, 608, 514, 931, 838, 381, 330, 370, 658, 915, 395, 415, 696, 897, 669,
                869, 360, 247, 909, 476, 705, 454, 695, 391, 298, 266, 434, 544, 772, 860, 353, 351, 541, 120, 76, 382,
                201, 139, 782, 88, 220, 85, 760, 438, 772, 71, 249, 229, 69, 179, 900, 528, 554, 575, 71, 30, 864, 252,
                880, 163, 369, 282, 940, 240, 558, 49, 441, 897, 260, 782, 547, 428, 230, 426, 78, 301, 994, 438, 634,
                235, 145, 654, 875 };

        System.out.println("the product of: " + rightmostNonZero(N, A));
    }
}
